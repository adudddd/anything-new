<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Happy New Year!</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: linear-gradient(to bottom, #080820, #0f1f35);
            font-family: 'Arial', sans-serif;
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        #skyCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        /* Happy New Year Message Styling */
        .new-year-message {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Cedarville Cursive', cursive;
            font-size: 4rem;
            color: #FFD700;
            text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #ffd700, 0 0 40px #ffd700;
            z-index: 15;
            opacity: 1;
            pointer-events: none;
        }

        /* Confetti Styles */
        .confetti {
            position: absolute;
            width: 10px;
            height: 16px;
            background-color: #f00;
            opacity: 0;
            z-index: 20;
            pointer-events: none;
        }

        .confetti.show {
            animation: confetti-fall 5s linear forwards;
            opacity: 1;
        }

        @keyframes confetti-fall {
            0% {
                top: -10px;
                opacity: 1;
            }
            80% {
                opacity: 1;
            }
            95% {
                opacity: 0.5;
            }
            100% {
                top: 100vh;
                opacity: 0;
            }
        }

        /* Emoji Styles */
        .emoji {
            position: absolute;
            font-size: 24px;
            z-index: 30;
            pointer-events: none;
            user-select: none;
        }

        /* Firework Particle Styles */
        .firework-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background-color: #fff;
            opacity: 1;
            z-index: 10;
            pointer-events: none;
        }
        
        .firework-particle.explode {
            animation: firework-explode 2s ease-out forwards;
        }

        @keyframes firework-explode {
            0% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: scale(3);
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Cedarville+Cursive&family=Dancing+Script&display=swap" rel="stylesheet">
</head>
<body>
    <canvas id="skyCanvas"></canvas>
    <div id="newYearMessage" class="new-year-message">Happy New Year Muddu</div>

    <script>
        const canvas = document.getElementById('skyCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Function to create a confetti particle
        function createConfettiParticle(x, y, color) {
            const confetti = document.createElement('div');
            confetti.classList.add('confetti');
            confetti.style.backgroundColor = color;
            confetti.style.left = `${x}px`;
            confetti.style.top = `${y}px`;
            document.body.appendChild(confetti);

            const animationDuration = 3 + Math.random() * 3;
            const animationDelay = Math.random() * 2;
            confetti.style.animation = `confetti-fall ${animationDuration}s linear ${animationDelay}s forwards`;

            setTimeout(() => confetti.remove(), (animationDuration + animationDelay) * 1000);
        }

        // Create confetti shower within a specified area
        function createConfettiShower(areaCenterX, areaCenterY, areaWidth, areaHeight) {
            const confettiColors = ['#f00', '#0f0', '#00f', '#ff0', '#f0f', '#00f'];
            for (let i = 0; i < 50; i++) {
                const x = areaCenterX + (Math.random() - 0.5) * areaWidth;
                const y = areaCenterY + (Math.random() - 0.5) * areaHeight;
                createConfettiParticle(x, y, confettiColors[i % confettiColors.length]);
            }
        }

        // Function to create a firework particle
        function createFireworkParticle(x, y, color, vx, vy) {
            const particle = document.createElement('div');
            particle.classList.add('firework-particle');
            particle.style.backgroundColor = color;
            particle.style.left = `${x}px`;
            particle.style.top = `${y}px`;
            document.body.appendChild(particle);
        
            // Use provided vx and vy for particle movement
            let life = 150;
            const particleAnimation = setInterval(() => {
                life -= 1;
                particle.style.left = `${parseFloat(particle.style.left) + vx}px`;
                particle.style.top = `${parseFloat(particle.style.top) + vy}px`;
                particle.style.opacity = life / 100;
        
                if (life <= 0) {
                    clearInterval(particleAnimation);
                    particle.remove();
                }
            }, 1000 / 60); // Update particle position at 60 FPS
        }
        

        // Modified Automatic Firework Creation Function
        function createAutomaticFirework() {
            const x = Math.random() * canvas.width;
            const y = Math.random() * (canvas.height * 0.5);
            const numParticles = 50 + Math.random() * 50;
            const baseVX = (Math.random() - 0.5) * 2;
            const baseVY = -(Math.random() * 4 + 2);

            for (let i = 0; i < numParticles; i++) {
                const angle = Math.random() * 2 * Math.PI;
                const speedMultiplier = Math.random() * 3;
                const vx = baseVX + Math.cos(angle) * speedMultiplier;
                const vy = baseVY + Math.sin(angle) * speedMultiplier;
                const color = `hsl(${Math.random() * 360}, 100%, 50%)`;
                createFireworkParticle(x, y, color, vx, vy);
            }
        }

        const startTime = Date.now();

        // Create Automatic Fireworks and Confetti for the First 15 Seconds
        const autoInterval = setInterval(() => {
            const elapsed = Date.now() - startTime;
            if (elapsed >= 15000) {
                clearInterval(autoInterval);
            } else {
                createAutomaticFirework();
                // Define the area where confetti should rain (e.g., top half of the screen)
                const areaCenterX = canvas.width / 2;
                const areaCenterY = canvas.height / 4;
                const areaWidth = canvas.width;
                const areaHeight = canvas.height / 2;
                createConfettiShower(areaCenterX, areaCenterY, areaWidth, areaHeight);
            }
        }, 700);

        // Function to create and animate emojis
        const emojis = ['â¤ï¸', 'ðŸ’–', 'âœ¨', 'ðŸŒŸ', 'ðŸ˜', 'ðŸ¥°'];
        let lastEmojiIndex = -1;

        function createEmoji(x, y) {
            const emoji = document.createElement('div');
            emoji.classList.add('emoji');
            let emojiIndex;
            do {
                emojiIndex = Math.floor(Math.random() * emojis.length);
            } while (emojiIndex === lastEmojiIndex);
            lastEmojiIndex = emojiIndex;
            emoji.textContent = emojis[emojiIndex];
            emoji.style.left = `${x}px`;
            emoji.style.top = `${y}px`;
            document.body.appendChild(emoji);

            setTimeout(() => {
                emoji.style.opacity = '0';
                emoji.style.top = `${parseFloat(emoji.style.top) - 50}px`;
            }, 20);

            setTimeout(() => emoji.remove(), 2000);
        }

        // Event listener for mouse interaction
        canvas.addEventListener('mousemove', (e) => {
            // Create changing emojis
            createEmoji(e.clientX, e.clientY);
        });
    </script>
</body>
</html>
